<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mensagem Importante</title>
<style>
:root{
  --pink:#ff7a7a;
  --dark:#0d0d10;
  --glass: rgba(255,255,255,0.08);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: "Inter", Arial, sans-serif;
  background: linear-gradient(180deg, #ffb6c1 0%, #ff7a7a 60%, #2b1326 100%);
  height:100vh;
  overflow:hidden;
  color:#fff;
}

/* Tela inicial */
#conteudo{
  position:fixed; inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:30px;
  gap:18px;
}
#conteudo h2{
  margin:0;
  font-size:26px;
  text-shadow: 0 3px 14px rgba(0,0,0,0.35);
}
.choices{
  position:relative;
  width:270px;
  height:80px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.btn {
  background: #111;
  color: white;
  border: none;
  padding: 12px 18px;
  width:120px;
  border-radius: 10px;
  cursor:pointer;
  font-size:16px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
}

/* Tela final */
#final{
  display:none;
  position:fixed; inset:0;
  background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.04), transparent 8%),
              linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.45));
  overflow:hidden;
  padding:28px;
}
#final .headline{
  text-align:center;
  margin-top:6px;
  font-size:22px;
  color: #ffdfe6;
  text-shadow: 0 6px 20px rgba(0,0,0,0.6);
}

/* Carrossel */
#carrossel-container{
  width:90%;
  max-width:760px;
  height: calc(100vh - 160px);
  margin:24px auto 0;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}
#carrossel-card{
  width:100%;
  height:100%;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.25));
  border-radius:18px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:22px;
  position:relative;
  overflow:hidden;
}
#carrossel-img{
  width:85%;
  max-height:62%;
  object-fit:cover;
  border-radius:14px;
  box-shadow: 0 18px 40px rgba(0,0,0,0.6);
  transition: transform 1s ease;
  border: 3px solid rgba(255,255,255,0.06);
}
.caption {
  width:86%;
  margin-top:20px;
  padding:12px 14px;
  border-radius:10px;
  background: rgba(0,0,0,0.45);
  color:#fff;
  text-shadow: 0 6px 18px rgba(0,0,0,0.6);
  font-size:15px;
  line-height:1.4;
  transition: opacity .35s ease, transform .35s ease;
}

/* Setas */
.seta {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  font-size:36px;
  color:#fff;
  cursor:pointer;
  user-select:none;
  padding:8px 10px;
  background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(255,255,255,0.02));
  border-radius:50%;
  box-shadow: 0 6px 18px rgba(0,0,0,0.5);
  transition: transform .15s ease, background .15s;
}
.seta:hover{ transform: translateY(-50%) scale(1.06); background: rgba(255,255,255,0.03); }
#prev{ left:16px; }
#next{ right:16px; }

/* Hearts */
.heart{
  position:fixed;
  bottom:-50px;
  font-size:20px;
  pointer-events:none;
  animation: rise linear infinite;
  z-index:30;
}
@keyframes rise{
  from{transform:translateY(0) scale(1); opacity:1}
  to{transform:translateY(-110vh) scale(1.6); opacity:0}
}

/* canvas fogos */
#fogos{
  position:fixed; inset:0; z-index:5; pointer-events:none;
}

/* responsivo */
@media (max-width:600px){
  .seta{ font-size:26px; padding:6px; }
  #carrossel-img{ width:92%; max-height:50%; }
}
</style>
</head>
<body>

<audio id="musica" loop preload="auto">
  <source src="sonho_de_amor.mp3" type="audio/mpeg">
</audio>

<!-- Tela inicial -->
<div id="conteudo">
  <h2>Voc√™ aceita me dar uma segunda chance? üíñ</h2>
  <div class="choices">
    <button id="btn-sim" class="btn" onclick="sim()">SIM</button>
    <button id="btn-nao" class="btn" onmouseover="desvia(this)" onclick="desvia(this)">N√ÉO</button>
  </div>
</div>

<!-- Tela final -->
<div id="final">
  <div class="headline">Obrigado por ler ‚Äî s√≥ mais um pouquinho</div>

  <div id="carrossel-container">
    <div id="carrossel-card">
      <img id="carrossel-img" src="foto1.jpg" alt="foto">
      <div id="carrossel-caption" class="caption"></div>

      <!-- Bot√µes SIM/ N√ÉO (s√≥ no √∫ltimo slide) -->
      <div id="final-buttons" style="display:none; flex-direction:column; align-items:center; gap:14px;">
        <form id="form-resposta" style="display:flex; gap:14px; margin-bottom:6px;">
          <button type="button" onclick="enviarResposta('SIM')" class="btn">SIM</button>
          <button type="button" onclick="enviarResposta('N√ÉO')" class="btn">N√ÉO</button>
        </form>
      </div>

      <div id="prev" class="seta" onclick="mudarFoto(-1)">‚ùÆ</div>
      <div id="next" class="seta" onclick="mudarFoto(1)">‚ùØ</div>
    </div>
  </div>
</div>

<canvas id="fogos"></canvas>

<script>
/* ===============================
   FOTOS E TEXTOS (s√≥ trocar aqui)
   =============================== */
const fotos = [
  "foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg","foto6.jpg","foto7.jpg"
];
const textos = [
  `Eu precisava te dizer isso üòå<br>Se eu pudesse voltar no tempo, tentaria tudo de novo com voc√™ üíñ`,
  `Voc√™ foi minha inspira√ß√£o e ainda √© üòç<br>O que sinto por voc√™ √© √∫nico e verdadeiro ‚ú®`,
  `Sei que a vida seguiu e talvez voc√™ n√£o sinta o mesmo<br>Mas precisava abrir meu cora√ß√£o üòÖ`,
  `Se um dia pudermos conversar de boa, sem pressa<br>Quero mostrar que ainda quero estar ao seu lado üíå`,
  `Nossos caminhos tiveram altos e baixos<br>Mas meu amor por voc√™ nunca desapareceu üíò`,
  `Voc√™ √© √∫nica, e tudo que sinto por voc√™ √© verdadeiro ‚ú®<br>Meu cora√ß√£o ainda bate por voc√™ a cada dia üíò`,
  `Depois de tudo que guardei por tanto tempo<br>S√≥ quero uma chance de mostrar que posso te fazer feliz üíå`
];

/* ===============================
   VARI√ÅVEIS GERAIS
   =============================== */
const conteudo = document.getElementById('conteudo');
const final = document.getElementById('final');
const musica = document.getElementById('musica');
const imgEl = document.getElementById('carrossel-img');
const captionEl = document.getElementById('carrossel-caption');
const finalButtons = document.getElementById('final-buttons');

let indice = 0;
let heartsInterval;

/* ===============================
   FUN√á√ïES DE SLIDES
   =============================== */
function updateSlide(i){
  indice = i;
  if(indice<0) indice=fotos.length-1;
  if(indice>=fotos.length) indice=0;

  imgEl.src=fotos[indice];
  captionEl.innerHTML=textos[indice];

  // mostra bot√µes s√≥ no √∫ltimo slide
  finalButtons.style.display=(indice===fotos.length-1)?'flex':'none';
}
function mudarFoto(direcao){ updateSlide(indice+direcao); }

/* ===============================
   PRIMEIRA TELA
   =============================== */
function sim(){
  conteudo.style.display='none';
  final.style.display='block';
  musica.volume=0.2; // üîâ volume inicial
  const playPromise=musica.play();
  if(playPromise!==undefined){
    playPromise.then(()=> fadeInAudio(musica,3000)).catch(()=> fadeInAudio(musica,3000));
  } else fadeInAudio(musica,3000);
  heartsInterval=setInterval(createHeart,800);
  updateSlide(0);
}
function fadeInAudio(audio,duration){
  const steps=30, stepTime=duration/steps;
  let cur=0;
  const inc=0.2/steps; // sobe at√© 0.4 no m√°x
  const f=setInterval(()=>{
    cur+=inc;
    audio.volume=Math.min(0.4,cur);
    if(audio.volume>=0.4) clearInterval(f);
  },stepTime);
}

// bot√£o N√ÉO fugitivo (s√≥ na primeira tela)
function desvia(btn){
  const padding=8, vw=window.innerWidth, vh=window.innerHeight;
  const rect=btn.getBoundingClientRect();
  const left=Math.random()*(vw-rect.width-padding*2)+padding;
  const top=Math.random()*(vh-rect.height-padding*2)+padding;
  btn.style.position='fixed';
  btn.style.left=`${left}px`;
  btn.style.top=`${top}px`;
}

/* ===============================
   CORA√á√ïES
   =============================== */
function createHeart(){
  const heart=document.createElement('div');
  heart.className='heart';
  heart.style.left=(Math.random()*90)+'vw';
  heart.style.fontSize=(16+Math.random()*18)+'px';
  heart.style.animationDuration=(3+Math.random()*4)+'s';
  heart.innerText='‚ù§';
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),7000);
}

/* ===============================
   GOOGLE FORMS
   =============================== */
function enviarResposta(valor){
  const url = "https://docs.google.com/forms/d/e/1FAIpQLSf3dUanGI4-BOXE54hAcN56GFOcLju5lRZNEtgSbPUomA0OMQ/formResponse";
  const formData = new FormData();
  formData.append("entry.1287863693", valor);

  fetch(url, { method:"POST", body:formData, mode:"no-cors" })
    .then(()=>{
      if(valor === "SIM"){
        iniciarFogos();
      }
      alert("Resposta enviada com sucesso!");
    })
    .catch(()=>{
      alert("Erro ao enviar a resposta.");
    });
}

/* ===============================
   FOGOS DE ARTIF√çCIO
   =============================== */
function iniciarFogos(){
  const canvas=document.getElementById('fogos');
  const ctx=canvas.getContext('2d');
  function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
  resize();
  addEventListener('resize',resize);

  const fireworks=[], particles=[];

  class Firework{constructor(x,y,targetY){this.x=x;this.y=y;this.targetY=targetY;this.speed=5+Math.random()*3;this.radius=3;this.color=`hsl(${Math.random()*360},100%,60%)`;}
    update(){this.y-=this.speed;if(this.y<=this.targetY){this.explode();return true;} return false;}
    draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.fillStyle=this.color;ctx.fill();}
    explode(){for(let i=0;i<30;i++) particles.push(new Particle(this.x,this.y));}
  }

  class Particle{constructor(x,y){this.x=x;this.y=y;this.radius=2+Math.random()*2;this.color=`hsl(${Math.random()*360},100%,60%)`;this.speedX=(Math.random()-0.5)*6;this.speedY=(Math.random()-0.5)*6;this.life=70+Math.random()*40;}
    update(){this.x+=this.speedX; this.y+=this.speedY; this.speedY+=0.05; this.life--;}
    draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.fillStyle=this.color; ctx.fill();}
  }

  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let i=fireworks.length-1;i>=0;i--){fireworks[i].draw();if(fireworks[i].update()) fireworks.splice(i,1);}
    for(let i=particles.length-1;i>=0;i--){particles[i].draw();particles[i].update();if(particles[i].life<=0) particles.splice(i,1);}
    requestAnimationFrame(animate);
  }

  setInterval(()=>{
    const x=Math.random()*canvas.width;
    const targetY=Math.random()*(canvas.height*0.4)+50;
    fireworks.push(new Firework(x,canvas.height,targetY));
  },900);

  animate();
}

// inicia slide 0
updateSlide(0);
</script>

</body>
</html>
