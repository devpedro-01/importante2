<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mensagem Importante</title>
<style>
:root{
  --pink:#ff7a7a;
  --dark:#0d0d10;
  --glass: rgba(255,255,255,0.08);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: "Inter", Arial, sans-serif;
  background: linear-gradient(180deg, #ffb6c1 0%, #ff7a7a 60%, #2b1326 100%);
  height:100vh;
  overflow:hidden;
  color:#fff;
}

/* Tela inicial */
#conteudo{
  position:fixed; inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:30px;
  gap:18px;
}
#conteudo h2{
  margin:0;
  font-size:26px;
  text-shadow: 0 3px 14px rgba(0,0,0,0.35);
}
.choices{
  position:relative;
  width:270px;
  height:80px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.btn {
  background: #111;
  color: white;
  border: none;
  padding: 12px 18px;
  width:120px;
  border-radius: 10px;
  cursor:pointer;
  font-size:16px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
}

/* Tela final */
#final{
  display:none;
  position:fixed; inset:0;
  background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.04), transparent 8%),
              linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.45));
  overflow:hidden;
  padding:28px;
}

/* Carrossel */
#carrossel-container{
  width:90%;
  max-width:760px;
  height: calc(100vh - 120px);
  margin:24px auto 0;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}
#carrossel-card{
  width:100%;
  height:100%;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.25));
  border-radius:18px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:22px;
  position:relative;
  overflow:hidden;
}
.media-item{
  width:100%;
  max-height:70%; /* ğŸ”¥ aumentei em 10% */
  border-radius:14px;
  box-shadow: 0 18px 40px rgba(0,0,0,0.6);
  border: 3px solid rgba(255,255,255,0.06);
  object-fit:contain;
  margin-bottom:10px; /* ğŸ”¥ legenda colada */
}
.caption {
  width:90%;
  padding:10px 12px;
  border-radius:10px;
  background: rgba(0,0,0,0.45);
  color:#fff;
  text-shadow: 0 6px 18px rgba(0,0,0,0.6);
  font-size:15px;
  line-height:1.4;
  text-align:center;
  margin-top:6px; /* ğŸ”¥ mais perto da foto */
}

/* Setas */
.seta {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  font-size:36px;
  color:#fff;
  cursor:pointer;
  user-select:none;
  padding:8px 10px;
  background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(255,255,255,0.02));
  border-radius:50%;
  box-shadow: 0 6px 18px rgba(0,0,0,0.5);
  transition: transform .15s ease, background .15s;
}
.seta:hover{ transform: translateY(-50%) scale(1.06); background: rgba(255,255,255,0.03); }
#prev{ left:16px; }
#next{ right:16px; }

/* Hearts */
.heart{
  position:fixed;
  bottom:-50px;
  font-size:20px;
  pointer-events:none;
  animation: rise linear infinite;
  z-index:30;
}
@keyframes rise{
  from{transform:translateY(0) scale(1); opacity:1}
  to{transform:translateY(-110vh) scale(1.6); opacity:0}
}

/* canvas fogos */
#fogos{
  position:fixed; inset:0; z-index:5; pointer-events:none;
}

/* responsivo */
@media (max-width:600px){
  .media-item{
    max-height:70%; /* ğŸ”¥ garante 70% no celular */
  }
  .seta{ font-size:26px; padding:6px; }
}
</style>
</head>
<body>

<audio id="musica" loop preload="auto">
  <source src="sonho_de_amor.mp3" type="audio/mpeg">
</audio>

<!-- Tela inicial -->
<div id="conteudo">
  <h2>VocÃª aceita me dar uma segunda chance? ğŸ’–</h2>
  <div class="choices">
    <button id="btn-sim" class="btn" onclick="sim()">SIM</button>
    <button id="btn-nao" class="btn" onmouseover="desvia(this)" onclick="desvia(this)">NÃƒO</button>
  </div>
</div>

<!-- Tela final -->
<div id="final">
  <div id="carrossel-container">
    <div id="carrossel-card">
      <div id="media-wrapper"></div>
      <div id="carrossel-caption" class="caption"></div>

      <!-- BotÃµes SIM/ NÃƒO (Ãºltimo slide) -->
      <div id="final-buttons" style="display:none; flex-direction:column; align-items:center; gap:10px; margin-top:8px;">
        <form id="form-resposta" style="display:flex; gap:14px;">
          <button type="button" onclick="enviarResposta('SIM')" class="btn">SIM</button>
          <button type="button" onclick="enviarResposta('NÃƒO')" class="btn">NÃƒO</button>
        </form>
      </div>

      <div id="prev" class="seta" onclick="mudarFoto(-1)">â®</div>
      <div id="next" class="seta" onclick="mudarFoto(1)">â¯</div>
    </div>
  </div>
</div>

<canvas id="fogos"></canvas>

<script>
const midias = [
  "ruiva5.mp4","ruiva.mp4","ruiva1.mp4","ruiva2.mp4","ruiva3.mp4","ruiva4.mp4","doguinho.jpg"
];
const textos = [
  `Eu precisava te dizer isso ğŸ˜Œ<br>Se eu pudesse voltar no tempo, tentaria tudo de novo com vocÃª ğŸ’–`,
  `VocÃª foi minha inspiraÃ§Ã£o e ainda Ã© ğŸ˜<br>O que sinto por vocÃª Ã© Ãºnico e verdadeiro âœ¨`,
  `Sei que a vida seguiu e talvez vocÃª nÃ£o sinta o mesmo<br>Mas precisava abrir meu coraÃ§Ã£o ğŸ˜…`,
  `Se um dia pudermos conversar de boa, sem pressa<br>Quero mostrar que ainda quero estar ao seu lado ğŸ’Œ`,
  `Nossos caminhos tiveram altos e baixos<br>Mas meu amor por vocÃª nunca desapareceu ğŸ’˜`,
  `VocÃª Ã© Ãºnica, e tudo que sinto por vocÃª Ã© verdadeiro âœ¨<br>Meu coraÃ§Ã£o ainda bate por vocÃª a cada dia ğŸ’˜`,
  `Depois de tudo que guardei por tanto tempo<br>SÃ³ quero uma chance de mostrar que posso te fazer feliz ğŸ’Œ`
];

const conteudo=document.getElementById('conteudo');
const final=document.getElementById('final');
const musica=document.getElementById('musica');
const mediaWrapper=document.getElementById('media-wrapper');
const captionEl=document.getElementById('carrossel-caption');
const finalButtons=document.getElementById('final-buttons');
let indice=0;
let heartInterval=null;

function updateSlide(i){
  indice=i;
  if(indice<0) indice=midias.length-1;
  if(indice>=midias.length) indice=0;
  const midiaAtual=midias[indice];
  mediaWrapper.innerHTML="";
  if(midiaAtual.endsWith(".mp4")){
    const video=document.createElement("video");
    video.src=midiaAtual;
    video.className="media-item";
    video.autoplay=true;
    video.muted=true;
    video.loop=true;
    mediaWrapper.appendChild(video);
  } else {
    const img=document.createElement("img");
    img.src=midiaAtual;
    img.className="media-item";
    mediaWrapper.appendChild(img);
  }
  captionEl.innerHTML=textos[indice];
  finalButtons.style.display=(indice===midias.length-1)?'flex':'none';
}
function mudarFoto(direcao){ updateSlide(indice+direcao); }

function sim(){
  conteudo.style.display='none';
  final.style.display='block';
  musica.volume=0.2;
  musica.play().catch(()=>{});
  updateSlide(0);
  iniciarCoracoes();
}
function desvia(btn){
  const vw=window.innerWidth, vh=window.innerHeight;
  const left=Math.random()*(vw-btn.offsetWidth-20);
  const top=Math.random()*(vh-btn.offsetHeight-20);
  btn.style.position='fixed';
  btn.style.left=`${left}px`;
  btn.style.top=`${top}px`;
}
function enviarResposta(valor){
  const url="https://docs.google.com/forms/d/e/1FAIpQLSf3dUanGI4-BOXE54hAcN56GFOcLju5lRZNEtgSbPUomA0OMQ/formResponse";
  const formData=new FormData();
  formData.append("entry.1287863693", valor);
  fetch(url,{method:"POST",body:formData,mode:"no-cors"})
    .then(()=>{
      if(valor==="SIM") iniciarFogos();
      alert("Resposta enviada com sucesso!");
    })
    .catch(()=>alert("Erro ao enviar a resposta."));
}

function iniciarCoracoes(){
  if(heartInterval) return;
  heartInterval=setInterval(()=>{
    const heart=document.createElement("div");
    heart.className="heart";
    heart.innerHTML="â¤ï¸";
    heart.style.left=Math.random()*100+"vw";
    heart.style.animationDuration=(4+Math.random()*3)+"s";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),7000);
  },400);
}

function iniciarFogos(){
  const canvas=document.getElementById('fogos');
  const ctx=canvas.getContext('2d');
  function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
  resize(); addEventListener('resize',resize);
  const fireworks=[], particles=[];
  class Firework{constructor(x,y,targetY){this.x=x;this.y=y;this.targetY=targetY;this.speed=5+Math.random()*3;this.color=`hsl(${Math.random()*360},100%,60%)`;}
    update(){this.y-=this.speed;if(this.y<=this.targetY){this.explode();return true;} return false;}
    draw(){ctx.beginPath();ctx.arc(this.x,this.y,3,0,Math.PI*2);ctx.fillStyle=this.color;ctx.fill();}
    explode(){for(let i=0;i<30;i++)particles.push(new Particle(this.x,this.y));}}
  class Particle{constructor(x,y){this.x=x;this.y=y;this.life=70+Math.random()*40;this.speedX=(Math.random()-0.5)*6;this.speedY=(Math.random()-0.5)*6;this.color=`hsl(${Math.random()*360},100%,60%)`;}
    update(){this.x+=this.speedX;this.y+=this.speedY;this.speedY+=0.05;this.life--;}
    draw(){ctx.beginPath();ctx.arc(this.x,this.y,2,0,Math.PI*2);ctx.fillStyle=this.color;ctx.fill();}}
  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let i=fireworks.length-1;i>=0;i--){fireworks[i].draw();if(fireworks[i].update())fireworks.splice(i,1);}
    for(let i=particles.length-1;i>=0;i--){particles[i].draw();particles[i].update();if(particles[i].life<=0)particles.splice(i,1);}
    requestAnimationFrame(animate);}
  setInterval(()=>{fireworks.push(new Firework(Math.random()*canvas.width,canvas.height,Math.random()*(canvas.height*0.4)+50));},900);
  animate();
}
updateSlide(0);
</script>
</body>
</html>
